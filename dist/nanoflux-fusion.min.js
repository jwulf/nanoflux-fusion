!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.NanoFlux=t()}}(function(){var t;return function n(t,e,r){function i(s,c){if(!e[s]){if(!t[s]){var u="function"==typeof require&&require;if(!c&&u)return u(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var a=e[s]={exports:{}};t[s][0].call(a.exports,function(n){var e=t[s][1][n];return i(e?e:n)},a,a.exports,n,t,e,r)}return e[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(n,e,r){(function(i){!function(n){if("object"==typeof r)e.exports=n();else if("function"==typeof t&&t.amd)t(n);else{var o;"undefined"!=typeof window?o=window:"undefined"!=typeof i?o=i:"undefined"!=typeof self&&(o=self),o.NanoFlux=n()}}(function(){return function t(e,r,i){function o(c,u){if(!r[c]){if(!e[c]){var a="function"==typeof n&&n;if(!u&&a)return a(c,!0);if(s)return s(c,!0);throw new Error("Cannot find module '"+c+"'")}var f=r[c]={exports:{}};e[c][0].call(f.exports,function(t){var n=e[c][1][t];return o(n?n:t)},f,f.exports,t,e,r,i)}return r[c].exports}for(var s="function"==typeof n&&n,c=0;c<i.length;c++)o(i[c]);return o}({1:[function(t,n,e){"use strict";function r(t,n){this.__dispatcher=t,this.__constructor(n)}r.prototype.__constructor=function(t){for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n])},r.prototype.dispatch=function(t,n){this.__dispatcher.dispatch(t,n)};var i={};n.exports={clear:function(){i={}},create:function(t,n,e){if(!t||0===t.length)throw"Empty names are not allowed";return i[t]=new r(n,e),i[t]},getActions:function(t){return i[t]}}},{}],2:[function(t,n,e){"use strict";function r(t){return Array.isArray(t)?t:[t]}function i(t){var n=this;this.__stores=[],this.__handlerMapCache={},this.__isDispatching=!1;var e=function(t){for(var e=r(t),i=0;i<e.length;++i)n.__registerAction(e[i])},i=function(){t&&e(t)};i()}function o(t,n){return t||(t=c),s[t]||(s[t]=new i(n)),s[t]}i.prototype.__getHandlerName=function(t){var n=this.__handlerMapCache[t];return n||(n="on"+t[0].toUpperCase()+t.substr(1),this.__handlerMapCache[t]=n),n},i.prototype.__callAction=function(){for(var t=this.__getHandlerName(arguments[0]),n=Array.prototype.slice.call(arguments,1),e=0;e<this.__stores.length;++e){var r=this.__stores[e];r[t]&&r[t].apply(r,n)}},i.prototype.__registerAction=function(t){this[t]||(this[t]=this.__callAction.bind(this,t))},i.prototype.connectTo=function(t){for(var n=r(t),e=0;e<n.length;++e)-1===this.__stores.indexOf(n[e])&&this.__stores.push(n[e])},i.prototype.dispatch=function(t,n){if(this.__isDispatching)throw"DISPATCH WHILE DISPATCHING: Don't trigger any action in your store callbacks!";try{this.__isDispatching=!0,this.__registerAction(t),this[t](n)}catch(e){throw console.error(e),e}finally{this.__isDispatching=!1}};var s={},c="__defDispatcher";n.exports={clear:function(){s={}},create:function(t,n){return o(t,n)},getDispatcher:function(t){return o(t)}}},{}],3:[function(t,n,e){"use strict";var r=t("./store"),i=t("./dispatcher"),o=t("./actioncreator");n.exports={reset:function(){i.clear(),r.clear(),o.clear()},createStore:function(t,n){return r.create(t,n)},createDispatcher:function(t,n){return i.create(t,n)},createActions:function(t,n,e){return o.create(t,n,e)},getDispatcher:function(t){return i.getDispatcher(t)},getStore:function(t){return r.getStore(t)},getActions:function(t){return o.getActions(t)}}},{"./actioncreator":1,"./dispatcher":2,"./store":4}],4:[function(t,n,e){"use strict";function r(t,n){var e=n,r=t;this.unsubscribe=function(){var t=n.indexOf(r);e.splice(t,1)}}function i(t){this.__constructor(t),this.__subscriptionList=[]}i.prototype.__constructor=function(t){for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);this.onInitialize&&this.onInitialize()},i.prototype.subscribe=function(t,n){var e={context:t,func:n};return this.__subscriptionList.push(e),new r(e,this.__subscriptionList)},i.prototype.notify=function(){for(var t=0;t<this.__subscriptionList.length;++t){var n=this.__subscriptionList[t];n.func.apply(n.context,arguments)}};var o={};n.exports={clear:function(){o={}},create:function(t,n){return o[t]=new i(n),o[t]},getStore:function(t){return o[t]}}},{}]},{},[3])(3)})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,n,e){n.exports=t("./dist/nanoflux")},{"./dist/nanoflux":1}],3:[function(t,n,e){function r(){function t(n){var e=Object.getOwnPropertyNames(n);return e.forEach(function(e){var r=n[e];"object"==typeof r&&null!==r&&t(r)}),Object.freeze(n)}function n(t){var n={};Object.assign(n,e.immutableState,t),e.setState(n),this.notify(e.immutableState)}var e={immutableState:{},setState:function(n){t(n),this.immutableState=n}};return{on__fuse:function(t){var r=t.fuse.call(null,e.immutableState,t.params);r.then?r.then(n.bind(this)):n.call(this,r)},getState:function(){return e.immutableState}}}function i(){var t=s.createStore(c,r());s.createDispatcher(null,["__fuse"]).connectTo(t)}function o(t,n){return function(){s.getDispatcher().__fuse({fuse:t[n],params:arguments})}}var s=t("nanoflux"),c="__fusionStore__",u="__defaultFusionator__",a=[];s.getFusionStore=function(){return s.getStore(c)},s.createFusionator=function(t,n){var e={descriptor:t,actors:{}};a[n||u]=e;for(funcName in t)t.hasOwnProperty(funcName)&&(e.actors[funcName]=o(t,funcName))},s.getFusionActor=function(t,n){n=n||u;var e=a[n];if(!e)throw"Fusionator with name '"+n+"' is not defined";var r=e.actors[t];if(!r)throw"Actor with name '"+t+"' is not defined for fusionator '"+n;return r},s.createFusionActor=function(t,n){if(n=n||0,n>=a.length)throw"Invalid fusionator handler/index";var e=a[n];if(!e[t])throw"No fusionator with name '"+t+"' registered";return function(){s.getDispatcher().__fuse({fuse:e[t],params:arguments})}};var f=s.reset;s.reset=function(){f(),i(),a=[]},i(),n.exports=s},{nanoflux:2}]},{},[3])(3)});