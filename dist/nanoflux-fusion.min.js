!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.NanoFlux=t()}}(function(){var t;return function e(t,n,r){function i(s,c){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!c&&a)return a(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return i(n?n:e)},u,u.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,n,r){(function(i){!function(e){if("object"==typeof r)n.exports=e();else if("function"==typeof t&&t.amd)t(e);else{var o;"undefined"!=typeof window?o=window:"undefined"!=typeof i?o=i:"undefined"!=typeof self&&(o=self),o.NanoFlux=e()}}(function(){return function t(n,r,i){function o(c,a){if(!r[c]){if(!n[c]){var u="function"==typeof e&&e;if(!a&&u)return u(c,!0);if(s)return s(c,!0);throw new Error("Cannot find module '"+c+"'")}var f=r[c]={exports:{}};n[c][0].call(f.exports,function(t){var e=n[c][1][t];return o(e?e:t)},f,f.exports,t,n,r,i)}return r[c].exports}for(var s="function"==typeof e&&e,c=0;c<i.length;c++)o(i[c]);return o}({1:[function(t,e,n){"use strict";function r(t,e){this.__dispatcher=t,this.__constructor(e)}r.prototype.__constructor=function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e])},r.prototype.dispatch=function(t,e){this.__dispatcher.dispatch(t,e)};var i={};e.exports={clear:function(){i={}},create:function(t,e,n){if(!t||0===t.length)throw"Empty names are not allowed";return i[t]=new r(e,n),i[t]},getActions:function(t){return i[t]}}},{}],2:[function(t,e,n){"use strict";function r(t){return Array.isArray(t)?t:[t]}function i(t){var e=this;this.__stores=[],this.__handlerMapCache={},this.__isDispatching=!1,this.__middlewares=[];var n=function(t){for(var n=r(t),i=0;i<n.length;++i)e.__registerAction(n[i])},i=function(){t&&n(t)};i()}function o(t,e){return t||(t=c),s[t]||(s[t]=new i(e)),s[t]}i.prototype.__getHandlerName=function(t){var e=this.__handlerMapCache[t];return e||(e="on"+t[0].toUpperCase()+t.substr(1),this.__handlerMapCache[t]=e),e},i.prototype.__callAction=function(){var t=this.__getHandlerName(arguments[0]),e=Array.prototype.slice.call(arguments,1);this.__callMiddleware(t,e);for(var n=0;n<this.__stores.length;++n){var r=this.__stores[n];r[t]&&r[t].apply(r,e)}},i.prototype.__registerAction=function(t){this[t]||(this[t]=this.__callAction.bind(this,t))},i.prototype.__callMiddleware=function(t,e){for(var n=0;n<this.__middlewares.length;++n)this.__middlewares[n].call(null,t,e)},i.prototype.addMiddleware=function(t){this.__middlewares.push(t)},i.prototype.connectTo=function(t){for(var e=r(t),n=0;n<e.length;++n)this.__stores.indexOf(e[n])===-1&&this.__stores.push(e[n])},i.prototype.dispatch=function(t,e){if(this.__isDispatching)throw"DISPATCH WHILE DISPATCHING: Don't trigger any action in your store callbacks!";try{this.__isDispatching=!0,this.__registerAction(t),this[t](e)}catch(n){throw console.error(n),n}finally{this.__isDispatching=!1}};var s={},c="__defDispatcher";e.exports={clear:function(){s={}},create:function(t,e){return o(t,e)},getDispatcher:function(t){return o(t)}}},{}],3:[function(t,e,n){"use strict";var r=t("./store"),i=t("./dispatcher"),o=t("./actioncreator");e.exports={reset:function(){i.clear(),r.clear(),o.clear()},createStore:function(t,e){return r.create(t,e)},createDispatcher:function(t,e){return i.create(t,e)},createActions:function(t,e,n){return o.create(t,e,n)},getDispatcher:function(t){return i.getDispatcher(t)},getStore:function(t){return r.getStore(t)},getActions:function(t){return o.getActions(t)},use:function(t,e){e?e.addMiddleware(t):i.getDispatcher().addMiddleware(t)}}},{"./actioncreator":1,"./dispatcher":2,"./store":4}],4:[function(t,e,n){"use strict";function r(t,e){var n=e,r=t;this.unsubscribe=function(){var t=e.indexOf(r);n.splice(t,1)}}function i(t){this.__constructor(t),this.__subscriptionList=[]}i.prototype.__constructor=function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);this.onInitialize&&this.onInitialize()},i.prototype.subscribe=function(t,e){var n={context:t,func:e};return this.__subscriptionList.push(n),new r(n,this.__subscriptionList)},i.prototype.notify=function(){for(var t=0;t<this.__subscriptionList.length;++t){var e=this.__subscriptionList[t];e.func.apply(e.context,arguments)}};var o={};e.exports={clear:function(){o={}},create:function(t,e){return o[t]=new i(e),o[t]},getStore:function(t){return o[t]}}},{}]},{},[3])(3)})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){e.exports=t("./dist/nanoflux.min")},{"./dist/nanoflux.min":1}],3:[function(t,e,n){function r(){function t(e){var n=Object.getOwnPropertyNames(e);return n.forEach(function(n){var r=e[n];"object"==typeof r&&null!==r&&t(r)}),Object.freeze(e)}function e(t,e){for(var n=t,o=0;o<r.length;++o)n=r[o].call(this,n,i.immutableState,e);return n}function n(t,n,r){var o={};r||(n=e.call(this,n,t)),Object.assign(o,i.immutableState,n),i.setState(o),r||this.notify(i.immutableState)}var r=[],i={immutableState:null,setState:function(e){t(e),this.immutableState=e}};return{on__fuse:function(t){var e=t.actor,r=t.fuse.call(null,i.immutableState,t.params);r.then?r.then(n.bind(this,e))["catch"](function(t){console.error("# Nanoflux-Fusion: Promise Exception\n",t)}):n.call(this,e,r)},__initState:function(t){n.call(this,"__initState",t,!0)},use:function(t){r.push(t)},getState:function(){return i.immutableState}}}function i(t){if(!s.getStore(c)||t){var e=s.createStore(c,r());s.createDispatcher(null,["__fuse"]).connectTo(e)}}function o(t,e){return function(){s.getDispatcher().__fuse({actor:e,fuse:t[e],params:arguments})}}var s=t("nanoflux"),c="__fusionStore__",a="__defaultFusionator__",u=[];s.getFusionStore=function(){return s.getStore(c)},s.createFusionator=function(t,e,n){var r={descriptor:t,actors:{}};if(!e)throw"You must specify an initial state";s.getFusionStore().__initState(e),u[n||a]=r;for(funcName in t)t.hasOwnProperty(funcName)&&(r.actors[funcName]=o(t,funcName))},s.getFusionActor=function(t,e){e=e||a;var n=u[e];if(!n)throw"Fusionator with name '"+e+"' is not defined";var r=n.actors[t];if(!r)throw"Actor with name '"+t+"' is not defined for fusionator '"+e;return r};var f=s.reset;s.reset=function(){f(),i(!0),u=[]},i(!1),e.exports=s},{nanoflux:2}]},{},[3])(3)});